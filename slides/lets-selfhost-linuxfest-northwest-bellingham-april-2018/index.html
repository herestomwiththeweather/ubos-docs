<!doctype html>
<html>
 <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>Let's Self-Host -- LinuxFest Northwest, 2018</title>

  <link rel="stylesheet" href="/assets/reveal/css/reveal.css">
  <link rel="stylesheet" href="/assets/reveal/lib/css/zenburn.css">

  <link rel="stylesheet" href="structure.css">
  <link rel="stylesheet" href="style.css">

  <!-- Printing and PDF exports -->
  <script>
var link = document.createElement( 'link' );
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
 </head>
 <body>
  <div class="reveal">
   <div class="slides">
    <div class="topic">
     <table>
      <tr>
       <td style="vertical-align: middle; padding: 0 5px">Topic: Let's self-host with:</td>
       <td style="vertical-align: middle; padding: 0 5px"><img src="/images/ubos-50x50.png" width="50" height="50"></td>
      </tr>
     </table>
    </div>

    <section class="title">
     <h1>Let's Self-Host!</h1>
     <h2>Installathon With UBOS</h2>
     <table>
      <tr>
       <td style="vertical-align: middle">
        <a href="https://nextcloud.com/" title="Nextcloud: A safe home for all your data">
         <img class="appicon" src="/images/nextcloud-72x72.png" alt="[Nextcloud]" width="72" height="72">
        </a>
        <a href="https://mediawiki.org/" title="Mediawiki: the wiki that Wikipedia runs on">
         <img class="appicon" src="/images/mediawiki-72x72.png" alt="[Mediawiki]" width="72" height="72">
        </a>
        <a href="https://wordpress.org/" title="Wordpress: blog tools, publishing platform, and CMS">
         <img class="appicon" src="/images/wordpress-72x72.png" alt="[Wordpress]" width="72" height="72">
        </a>
       </td>
       <td style="vertical-align: middle">
        <a href="https://ubos.net/apps/">...</a>
       </td>
      </tr>
     </table>

     <p class="author">Johannes Ernst</p>
     <p class="contact">
        mail: <a href="mailto:jernst@indiecomputing.com">jernst@indiecomputing.com</a>
        &middot; blog: <a href="https://upon2020.com/">upon2020.com</a>
        <br>
        Mastodon: <a href="https://social.coop/@j12t">@j12t@social.coop</a>
        &middot; Twitter: <a href="https://twitter.com/Johannes_Ernst">@Johannes_Ernst</a>
     </p>
    </section>


    <section>
     <div style="position: absolute; right: 20%; top: -50px">
      <a href="https://nextcloud.com/" title="Nextcloud: A safe home for all your data">
       <img class="appicon" src="/images/nextcloud-72x72.png" alt="[Nextcloud]" width="72px" height="72px" style="transform: rotate(10deg)">
      </a>
     </div>
     <h2>Goal</h2>
     <p>Get (at least) Nextcloud installed and running on your machine</p>
    </section>


    <section>
     <h2>Step 1:<br>
         Get UBOS container image</h2>
     <ul>
      <li>Copy from USB stick: <code>ubos_yellow_x86_64-container_XXX.tar.xz</code></li>
      <li>To your Linux Desktop</li>
      <li>Pass on the USB stick!</li>
     </ul>
    </section>


    <section>
     <h2>Interlude 1/4:<br>
         why Linux container?</h2>
     <ul>
      <li>Why not? :-)</li>
     </ul>
    </section>


    <section>
     <h2>Interlude 2/4:<br>
         why self-host?</h2>
     <ul>
      <li>Everybody spies on you on-line</li>
      <li>Nobody can kick you off your own server</li>
      <li>You decide what software to run, not some overlord in the cloud</li>
     </ul>
    </section>


    <section>
     <h2>Interlude 3/4:<br>
         why Nextcloud?</h2>
     <ul>
      <li>File storage/sharing, calendaring, contacts, notes, ...</li>
      <li>Mature, well-developed, security-conscious FLOSS web app</li>
      <li>Desktop and mobile integration</li>
      <li>Large community of users</li>
     </ul>
    </section>


    <section>
     <div style="position: absolute; right: 5%; top: -50px">
      <a href="https://ubos.net/" title="UBOS: Linux distro for self-hosting and the Indie IoT">
       <img class="appicon" src="/images/ubos-160x160.png" alt="[UBOS]" width="160" height="160" style="transform: rotate(10deg)">
      </a>
     </div>
     <h2>Interlude 4/4:<br>
         why UBOS?</h2>
     <ul>
      <li>Saves you tons of time</li>
      <li>You don't need to be a server admin expert</li>
     </ul>
    </section>

    <section>
     <h2 style="margin-bottom: .5em">UBOS comparison example</h2>
     <table class="details">
      <tr>
       <th style="width: 50%">Typical web server upgrade</th>
       <th>Web server upgrade with UBOS</th>
      </tr>
      <tr>
       <td>
        <ol>
         <li class="fragment">Stop web server.</li>
         <li class="fragment">Remember what other daemons may need to be stopped and stop them.</li>
         <li class="fragment">Remember which apps might be installed on the server.</li>
         <li class="fragment">Create a backup for all data of all apps.</li>
         <li class="fragment"><code>apt-get update</code> and fix what broke. Maybe reboot.</li>
         <li class="fragment">For each installed app, check whether an updated version is available.</li>
         <li class="fragment">Download each app's new tar file.</li>
         <li class="fragment">Read all UPGRADE.txt files (if they exist).</li>
         <li class="fragment">Follow instructions. May include changed Web server setup, database
             migrations, â€¦</li>
        </ol>
        <p class="fragment">Oh my!</p>
       </td>
       <td>
        <ol>
         <li class="fragment"><pre style="font-size: 1em"><span class="you">sudo ubos-admin update</span></pre></li>
        </ol>
        <p class="fragment">... and enjoy the sunshine</p>
       </td>
      </tr>
     </table>
    </section>


    <section>
     <h2 style="margin-bottom: .5em">UBOS: automate web app admin</h2>

     <pre class="shell"># ubos-admin
Synopsis:
    ubos-admin backup [&lt;args&gt;...]
    ubos-admin backup-to-amazons3 [&lt;args&gt;...]
    ubos-admin backupinfo [&lt;args&gt;...]
    ubos-admin createsite [&lt;args&gt;...]
    ubos-admin deploy [&lt;args&gt;...]
    ubos-admin hostid [&lt;args&gt;...]
    ubos-admin init-staff [&lt;args&gt;...]
    ubos-admin listnetconfigs [&lt;args&gt;...]
    ubos-admin listsites [&lt;args&gt;...]
    ubos-admin read-configuration-from-staff [&lt;args&gt;...]
    ubos-admin restore [&lt;args&gt;...]
    ubos-admin setnetconfig [&lt;args&gt;...]
    ubos-admin setup-shepherd [&lt;args&gt;...]
    ubos-admin showappconfig [&lt;args&gt;...]
    ubos-admin shownetconfig [&lt;args&gt;...]
    ubos-admin showsite [&lt;args&gt;...]
    ubos-admin status [&lt;args&gt;...]
    ubos-admin undeploy [&lt;args&gt;...]
    ubos-admin update [&lt;args&gt;...]
    ubos-admin write-configuration-to-staff [&lt;args&gt;...]
    ubos-admin --help
    ubos-admin &lt;command&gt; --help</pre>
    </section>

    <section>
     <h2>Step 2: Unpack UBOS</h2>
     <pre class="shell">% <span class="you">ls</span>
ubos_yellow_x86_64-container_XXX.tar.xz
% <span class="you">mkdir ubos</span>
% <span class="you">cd ubos</span>
% <span class="you">sudo tar xfJ ../ubos_yellow_x86_64-container_XXX.tar.xz</span></pre>
    </section>


    <section>
     <h2>Step 3: Boot UBOS</h2>
     <pre class="shell">% <span class="you">sudo systemd-nspawn -b -n -D . -M ubos</span>

(boot log skipped)

Login: <span class="you">root</span></pre>
     <pre class="shell fragment"># <span class="you">systemctl is-system-running</span></pre>
     <pre class="shell fragment"># <span class="you">ip addr</span></pre>
    </section>


    <section>
     <h2>Step 4: Install Nextcloud</h2>
     <pre class="shell"># <span class="you">ubos-admin createsite</span>
** First a few questions about the website that you are about to create:
Hostname (or * for any): <span class="you">*</span>
Site admin user id (e.g. admin): <span class="you">admin</span>
Site admin user name (e.g. John Doe): <span class="you">admin</span>
Site admin user password (e.g. s3cr3t): <span class="you">...</span>
Repeat site admin user password: <span class="you">...</span>
Site admin user e-mail (e.g. foo@bar.com): <span class="you">demo@ubos.net</span>
** Now a few questions about the app(s) you are going to deploy to this site:
First app to run (or leave empty when no more apps): <span class="you">nextcloud</span>
App nextcloud suggests context path /nextcloud
Enter context path: <span class="you">/nextcloud</span>
Any accessories for nextcloud? Enter list: <span class="you">nextcloud-calendar nextcloud-contacts</span>
Next app to run (or leave empty when no more apps):
Deploying...
Installed site s65313ed42bc66ee1cc926a3edffef9e2b2f04eb9 at http://*/</pre>
    </section>


    <section>
     <h2>Step 5: let's use Nextcloud</h2>
     <ul>
      <li>Go to <pre>http://10.0.0.1/</pre> or whatever your IP address was above</li>
      <li>Login with the admin account and password you specified.</li>
     </ul>
    </section>


    <section>
     <h2 style="margin-bottom: .5em">What else can UBOS do for me?</h2>
     <ul>
      <li>Root password management via the UBOS Staff</li>
      <li>Unlimited virtual hosts</li>
      <li>Automated SSL/TLS certificate setup</li>
      <li>Automated WiFi setup</li>
      <li>Automatic firewall configuration</li>
     </ul>
     <div style="margin: 1.5em 0">
      <a href="https://github.com/uboslinux/ubos-utilapps/" title="Docroot: static file hosting with SSH-based upload">
       <img class="appicon" src="/images/docroot-72x72.png" alt="[Docroot]" width="72" height="72">
      </a>
      <a href="https://withknown.com/" title="Known: Indieweb publishing platform for everyone">
       <img class="appicon" src="/images/known-72x72.png" alt="[Known]" width="72" height="72">
      </a>
      <a href="https://joinmastodon.org/" title="Mastodon: free, open-source, decentralized microblogging network">
       <img class="appicon" src="/images/mastodon-72x72.png" alt="[Mastodon]" width="72" height="72">
      </a>
      <a href="https://about.mattermost.com/" title="Mattermost: open source, self-hosted Slack-alternative">
       <img class="appicon" src="/images/mattermost-72x72.png" alt="[Mattermost]" width="72" height="72">
      </a>
      <a href="https://mediawiki.org/" title="Mediawiki: the wiki that Wikipedia runs on">
       <img class="appicon" src="/images/mediawiki-72x72.png" alt="[Mediawiki]" width="72" height="72">
      </a>
      <a href="https://nextcloud.com/" title="Nextcloud: a safe home for all your data">
       <img class="appicon" src="/images/nextcloud-72x72.png" alt="[Nextcloud]" width="72" height="72">
      </a>
      <a href="https://phpbb.com/" title="phpBB: bulletin-board">
       <img class="appicon" src="/images/phpbb-72x72.png" alt="[phpBB]" width="72" height="72">
      </a>
      <br>
      <a href="https://github.com/ubos-utilapps/" title="Redirect: redirects to another site">
       <img class="appicon" src="/images/redirect-72x72.png" alt="[Redirect]" width="72" height="72">
      </a>
      <a href="https://github.com/scripting/river5/" title="River5: a river-of-news RSS aggregator">
       <img class="appicon" src="/images/river-72x72.png" alt="[River5]" width="72" height="72">
      </a>
      <a href="https://www.selfoss.aditu.de/" title="Selfoss: multipurpose rss reader, live stream, mashup, aggregation web application">
       <img class="appicon" src="/images/selfoss-72x72.png" alt="[Selfoss]" width="72" height="72">
      </a>
      <a href="https://github.com/shaarli/Shaarli/" title="Shaarli: personal, minimalist, super-fast, bookmarking service">
       <img class="appicon" src="/images/shaarli-72x72.png" alt="[Shaarli]" width="72" height="72">
      </a>
      <a href="https://webtrees.net/" title="Webtrees: full-featured web genealogy app">
       <img class="appicon" src="/images/webtrees-72x72.png" alt="[Webtrees]" width="72" height="72">
      </a>
      <a href="https://wordpress.org/" title="Wordpress: blog tools, publishing platform, and CMS">
       <img class="appicon" src="/images/wordpress-72x72.png" alt="[Wordpress]" width="72" height="72">
      </a>
      ...
     </div>
     <div>
      PCs &middot; all Raspberry Pi's &middot; ESPRESSObin<br>
      Linux container &middot; VirtualBox/VMWare &middot; Amazon EC2
     </div>
    </section>

    <section>
     <h2>Next steps:</h2>
     <ul>
      <li>Set up a personal server for yourself and your family/friends</li>
      <li>Leave the cloud overloards and their empires</li>
      <li>Check out <a href="https://ubos.net/">ubos.net</a>, ask questions on
          <a href="https://forum.ubos.net">forum.ubos.net</a></li>
      <li>Bring more apps to UBOS!</li>
     </ul>
     <p>THANK YOU FOR COMING!</p>
    </section>
   </div>
  </div>

  <script src="/assets/reveal/lib/js/head.min.js"></script>
  <script src="/assets/reveal/js/reveal.js"></script>

  <script>
Reveal.initialize( {
    dependencies: [
        { src: '/assets/reveal/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: '/assets/reveal/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: '/assets/reveal/plugin/notes/notes.js', async: true },
        { src: '/assets/reveal/plugin/highlight/highlight.js', async: true, callback: function() {
               hljs.initHighlightingOnLoad(); }
        },
        { src: '/assets/reveal/lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: '/assets/reveal/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: '/assets/reveal/plugin/zoom-js/zoom.js', async: true },
    ],
    slideNumber: 'c/t'
} );
  </script>
 </body>
</html>
