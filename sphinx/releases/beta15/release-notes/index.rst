Beta 15 Release Notes
=====================

To upgrade
----------

To be safe, first create a backup of all your sites to a suitable file:

* ``sudo ubos-admin backup --out ~/XXX.ubos-backup``

If you do not have any sites on your device, to be safe, as root:

* ``[[ -d /ubos/lib/ubos/ ]] || mkdir -p /ubos/lib/ubos/``

Then, update your device:

* ``sudo ubos-admin update -v``

What's new: for users
---------------------

* Raspberry Pis can now boot UBOS from USB. This allows users to use a
  more reliable disk medium than SD Cards. For supported models, please
  consult `this post <https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/msd.md>`_
  by the Raspberry Pi Foundation.

* The UBOS Staff now displays a nice HTML page with summary information
  about the devices the Staff knows about. This is very handy to find out,
  for example, a password automatically generated by UBOS during the
  deployment of a new app.

* Some computer enclosures have LEDs that can provide a visual status
  indicator to the user, without having to use a monitor or log in over
  the network. Specifically:

  * The "Desktop Pi" enclosure for the Raspberry Pi

  * Some of Intel's Next-Unit-of-Computing (NUC) devices

  UBOS can now drive those LEDs, flashing them, for example, when an
  administrative command is active.

* ``ubos-admin start-pagekite`` makes it easy to run Pagekite on UBOS. Pagekite
  is a combination of open-source software and paid service that securely routes traffic
  from the public internet to a computer located behind a firewall. This enables
  users host a public website on their UBOS device at home without having
  to deal with dynamic DNS or port forwarding on their router.

* The PHP opcache is now enabled by default, speeding up PHP applications
  that have run for a while.

* The default disk labels created by ``ubos-install`` have changed and have
  no more spaces in them.

* Nextcloud now knows how to use Redis as a cache.

* The Nextcloud "markdown" app is now available, which allows users to write
  markdown content in the browser, and instantly preview it.

* As usual, lots of little improvements, bug fixes, and lots of package
  upgrades.

What's new: for developers
--------------------------

* Perl and Python 3 have gone through major package upgrades; libraries
  in those languages need to be rebuilt with updated paths.

* Java 10 is now in the repos.

* ``php-systemd`` is now available to log to the system journal directly
  from PHP applications.

* Multi-phase deployment: AppConfigItems in apps can now be declared
  as running after all accessories of the app have been deployed, as
  opposed to before. This makes it possible to run start daemons,
  for example, only once all accessories have been deployed. To do this,
  mark an AppConfigItem with ``"phases" : [ "after-accessories" ]`` in
  the UBOS manifest.

* The new variable ``${appconfig.appconfigparsdir}`` resolves to the
  directory in which customization point values are stored. This
  makes it easier to access blob data, like images for example, that
  were provided as customization points.

* New functions ``uid`` and ``gid`` makes it easy to determine the
  numeric UID and GID of named users.
